R을 활용한 기술통계에 관해 간단하게 살펴보겠습니다.
1. \[기초 통계량\] 최소값, 최대값, 분위수, 중앙값, 평균, 분산, 표준편차 등을 계산합니다.
1. \[상자수염그림\] 기초통계량을 하나의 그래프로 확인합니다. 이상치를 탐지하고 제거할 수 있습니다.
1. \[도수분포표\] 데이터를 일정 구간으로 나누고, 구간별 빈도수와 상대도수 및 누적상대도수를 추가합니다.
1. \[히스토그램\] 데이터를 일정 구간으로 나눈 빈도수로 분포의 형태를 확인합니다.
1. \[정규성 검정\] 데이터가 정규분포를 따르는지 여부를 확인하는 방법을 알아봅니다.
1. \[표준화 & 정규화\] 척도가 다른 데이터를 같은 척도로 맞추는 방법으로 표준화와 정규화를 실행합니다.

기초 통계량 구하기
------------------

1.  최소값, 최대값, 범위(최소값, 최대값)
2.  중앙값
3.  사분위수 : 최소값(0%), 1분위수(25%), 중앙값(50%), 평균, 3분위수(75%), 최대값(100%)
4.  사분범위(IQR) : 3분위수와 1분위수 간 차이
5.  분산 및 표준편차

기초 통계량 계산 실습을 위해 먼저 임의의 수를 생성하겠습니다. 같은 결과를 재현할 수 있도록 `set.seed()` 함수를 사용합니다.

``` r
# 임의의 수를 생성할 때, 항상 같은 결과를 얻기 위해 set.seed()를 설정합니다.
# 괄호 안 seed에 할당하는 숫자는 분석가가 임의대로 정할 수 있습니다. 
set.seed(seed = 123)

# 평균이 0이고, 표준편차가 1인 정규분포를 따르는 임의의 수 1000개를 생성합니다.
x <- rnorm(n = 1000, mean = 0, sd = 1)
```

이렇게 생성한 `x` 객체를 이용하여 위에서 언급한 기초 통계량을 하나씩 계산해보겠습니다.

``` r
# 최소값은 min() 함수를 이용하여 계산합니다.
cat('최소값 :', x %>% min() %>% round(digits = 3L), '\n')
```

    ## 최소값 : -2.81

``` r
# 최대값은 max() 함수를 이용하여 계산합니다.
cat('최대값 :', x %>% max() %>% round(digits = 3L), '\n')
```

    ## 최대값 : 3.241

``` r
# 범위는 최소값과 최대값을 한 번에 출력해줍니다. range() 함수를 이용합니다.
cat('범  위 :', x %>% range() %>% round(digits = 3L), '\n')
```

    ## 범  위 : -2.81 3.241

``` r
# 중앙값은 전체 자료의 50%에 위치하는 값입니다. median() 함수를 이용합니다.
cat('중앙값 :', x %>% median() %>% round(digits = 3L), '\n')
```

    ## 중앙값 : 0.009

``` r
# 평균은 mean() 함수를 이용하여 계산합니다.
cat('평  균 :', x %>% mean() %>% round(digits = 3L), '\n')
```

    ## 평  균 : 0.016

``` r
# 사분위수는 전체 데이터를 정확하게 4등분하는 지점에 위치한 값입니다.
# 따라서 1분위수(25%), 중앙값(50%), 3분위수(75%) 등 3가지 값으로 구성되어 있습니다.
# R에서는 quantile() 함수를 이용하여 쉽게 구할 수 있습니다.
# 실제로는 quantile() 함수의 probs 인자에 0~1 사이에 원하는 값을 지정할 수 있으며, 
# 기본값으로 'seq(0, 1, 0.25)'이 할당되므로 최소값, 최대값까지 한 번에 출력됩니다.
cat('사분위수 :', x %>% quantile() %>% round(digits = 3L), '\n')
```

    ## 사분위수 : -2.81 -0.628 0.009 0.665 3.241

`quantile()` 함수의 `probs` 인자에 분석가가 임의의 수를 할당하면 원하는 위치의 값을 얻을 수 있습니다.

``` r
# 임의의 자리에 위치한 값을 얻을 수 얻을 수 있습니다.
x %>% 
  quantile(probs = c(0, 0.05, 0.1, 0.9, 0.95, 1)) %>% 
  round(digits = 3L) %>% 
  print()
```

    ##     0%     5%    10%    90%    95%   100% 
    ## -2.810 -1.623 -1.267  1.255  1.676  3.241

지금까지 살펴본 기초 통계량을 개별 함수로 구하는 대신 `summary()` 함수를 이용하면 숫자형 데이터의 요약 통계량들을 한 번에 확인할 수 있습니다. 문자형 데이터는 벡터의 크기(`length`)와 속성(`Class`와 `Mode`)를, 범주형 데이터는 빈도수를 각각 출력합니다.

``` r
# 숫자형 데이터의 요약 통계량을 간단하게 확인할 수 있습니다.
summary(object = x)
```

    ##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
    ## -2.80978 -0.62832  0.00921  0.01613  0.66460  3.24104

이번에는 분산과 표준편차를 구하는 방법을 알아보겠습니다. 분산과 표준편차는 데이터가 얼마나 퍼져 있는지를 알아보기 위해 사용합니다. 모수의 분산은 개별 `x`값에서 `x`의 평균을 뺀 값을 제곱하여 모두 더한 후 데이터의 수(`n`)로 나눠준 값이며, 표준편차는 분산의 양의 제곱근입니다. 한 가지 유의해야 할 점은 표본의 분산은 `n`이 아닌 `n-1`로 나눈다는 것입니다. `var()` 함수는 표본의 본산을 구하는 함수입니다. 물론 `n`이 커질수록 모분산과 표분분산은 거의 같아지게 됩니다.

``` r
# 분산을 계산합니다.
cat('분산 :', x %>% var() %>% round(digits = 4L), '\n')
```

    ## 분산 : 0.9835

``` r
# 표준편차를 계산합니다.
cat('표준편차 :', x %>% sd() %>% round(digits = 4L), '\n')
```

    ## 표준편차 : 0.9917

위에서 열거한 기초 통계량을 한 번에 확인할 수 있도록 사용자 정의 함수로 만들어 보겠습니다. 그리고 임의의 수를 생성하여 사용자 정의 함수에 할당하여 실행해보겠습니다.

``` r
# 기초 통계량을 반환하는 사용자 정의 함수를 생성합니다.
myStats <- function(obj) {
    cat('최소값   :', obj %>% min() %>% round(digits = 3L), '\n')
    cat('1분위수  :', obj %>% quantile() %>% `[`(2) %>% round(digits = 3L), '\n')
    cat('중앙값   :', obj %>% median() %>% round(digits = 3L), '\n')
    cat('평  균   :', obj %>% mean() %>% round(digits = 3L), '\n')
    cat('3분위수  :', obj %>% quantile() %>% `[`(4) %>% round(digits = 3L), '\n')
    cat('최대값   :', obj %>% max() %>% round(digits = 3L), '\n')
    cat('분  산   :', obj %>% var() %>% round(digits = 4L), '\n')
    cat('표준편차 :', obj %>% sd() %>% round(digits = 4L), '\n')
}

# set.seed()를 설정합니다.
set.seed(seed = 123)

# 평균이 10이고, 표준편차가 5인 정규분포를 따르는 임의의 수 100개를 생성합니다.
y <- rnorm(n = 100, mean = 10, sd = 5)

# 사용자 정의 함수에 y를 할당하고 실행합니다.
myStats(y)
```

    ## 최소값   : -1.546 
    ## 1분위수  : 7.531 
    ## 중앙값   : 10.309 
    ## 평  균   : 10.452 
    ## 3분위수  : 13.459 
    ## 최대값   : 20.937 
    ## 분  산   : 20.8308 
    ## 표준편차 : 4.5641

다양한 기술 통계량을 한 번에 확인할 수 있는 함수가 있어 소개해드립니다.

``` r
# [참고] 숫자형 데이터의 기술(descriptive) 통계량을 한 번에 확인할 수 있습니다.
psych::describe(x = x)
```

    ##    vars    n mean   sd median trimmed  mad   min  max range skew kurtosis
    ## X1    1 1000 0.02 0.99   0.01    0.01 0.96 -2.81 3.24  6.05 0.07    -0.08
    ##      se
    ## X1 0.03

상자수염그림 (Box plot)
-----------------------

**상자수염그림**은 숫자형 데이터의 분포를 한 눈에 알아볼 수 있도록 하는 그래프 중 하나입니다. 상자수염그림에는 데이터의 최소값, 1분위수, 중위수, 3분위수, 최대값의 위치를 쉽게 알아볼 수 있도록 표시되어 있으며, 이상치도 함께 확인할 수 있습니다. ![상자수엽그림](http://cfile27.uf.tistory.com/image/2774654A52CE9A3618B7B3) \* 출처 : <http://analyticsstory.com/72>

``` r
# 상자수염그림을 그립니다.
boxplot(x = x)
```

<img src="2018-03-16-기초-통계-정리_files/figure-markdown_github/unnamed-chunk-8-1.png" width="750px" />

상자수염그림에서 위 아래에 작은 동그라미로 출력된 점들이 몇 개 보입니다. **사분범위수(interquantile range, IQR)** 기준에서 볼 때 이상치(outlier)인 경우, 이렇게 작은 동그라미로 출력됩니다. IQR은 1분위수와 3분위수 사이의 범위를 의미합니다. 이상치는 1분위수에서 IQR의 1.5배보다 작은 값과 3분위수에서 IQR의 1.5배보다 큰 값으로 정할 수 있습니다.

``` r
# 사분범위수(IQR)를 계산합니다. 
iqr <- IQR(x = x)
print(iqr)
```

    ## [1] 1.292926

``` r
# 사분위수를 계산합니다.
qunt <- quantile(x = x)
print(qunt)
```

    ##           0%          25%          50%          75%         100% 
    ## -2.809774679 -0.628324243  0.009209639  0.664601867  3.241039935

``` r
# 1분위수에서 IQR의 1.5배 낮은 값과 3분위수에서 IQR의 1.5배 높은 값을 각각 구합니다.
lowerOut <- qunt[2] - iqr * 1.5
upperOut <- qunt[4] + iqr * 1.5

cat('이상치 기준점 1 :', lowerOut, '\n')
```

    ## 이상치 기준점 1 : -2.567713

``` r
cat('이상치 기준점 2 :', upperOut, '\n')
```

    ## 이상치 기준점 2 : 2.603991

``` r
# 이상치로 판정된 값을 출력합니다. 
# 데이터에 속한 개별값이 아래 조건식을 만족하면 값들을 출력됩니다. 
x[x < lowerOut | x > upperOut]
```

    ## [1]  3.241040 -2.643149 -2.660923 -2.809775 -2.601700  2.691714  2.684859

``` r
# 데이터에서 이상치로 판정된 값들의 위치를 출력합니다. 
loc <- which(x < lowerOut | x > upperOut)
print(loc)
```

    ## [1] 164 416 456 591 616 747 842

``` r
# 데이터에서 이상치로 판정된 값들을 모두 NA로 변경합니다. 
x[loc] <- NA
print(x)
```

    ##    [1] -0.560475647 -0.230177489  1.558708314  0.070508391  0.129287735
    ##    [6]  1.715064987  0.460916206 -1.265061235 -0.686852852 -0.445661970
    ##   [11]  1.224081797  0.359813827  0.400771451  0.110682716 -0.555841135
    ##   [16]  1.786913137  0.497850478 -1.966617157  0.701355902 -0.472791408
    ##   [21] -1.067823706 -0.217974915 -1.026004448 -0.728891229 -0.625039268
    ##   [26] -1.686693311  0.837787044  0.153373118 -1.138136937  1.253814921
    ##   [31]  0.426464221 -0.295071483  0.895125661  0.878133488  0.821581082
    ##   [36]  0.688640254  0.553917654 -0.061911711 -0.305962664 -0.380471001
    ##   [41] -0.694706979 -0.207917278 -1.265396352  2.168955965  1.207961998
    ##   [46] -1.123108583 -0.402884835 -0.466655354  0.779965118 -0.083369066
    ##   [51]  0.253318514 -0.028546755 -0.042870457  1.368602284 -0.225770986
    ##   [56]  1.516470604 -1.548752804  0.584613750  0.123854244  0.215941569
    ##   [61]  0.379639483 -0.502323453 -0.333207384 -1.018575383 -1.071791226
    ##   [66]  0.303528641  0.448209779  0.053004227  0.922267468  2.050084686
    ##   [71] -0.491031166 -2.309168876  1.005738524 -0.709200763 -0.688008616
    ##   [76]  1.025571370 -0.284773007 -1.220717712  0.181303480 -0.138891362
    ##   [81]  0.005764186  0.385280401 -0.370660032  0.644376549 -0.220486562
    ##   [86]  0.331781964  1.096839013  0.435181491 -0.325931586  1.148807618
    ##   [91]  0.993503856  0.548396960  0.238731735 -0.627906076  1.360652449
    ##   [96] -0.600259587  2.187332993  1.532610626 -0.235700359 -1.026420900
    ##  [101] -0.710406564  0.256883709 -0.246691878 -0.347542599 -0.951618567
    ##  [106] -0.045027725 -0.784904469 -1.667941937 -0.380226520  0.918996609
    ##  [111] -0.575346963  0.607964322 -1.617882708 -0.055561966  0.519407204
    ##  [116]  0.301153362  0.105676194 -0.640706008 -0.849704346 -1.024128791
    ##  [121]  0.117646597 -0.947474614 -0.490557444 -0.256092192  1.843862005
    ##  [126] -0.651949902  0.235386572  0.077960850 -0.961856634 -0.071308086
    ##  [131]  1.444550858  0.451504053  0.041232922 -0.422496832 -2.053247222
    ##  [136]  1.131337213 -1.460640071  0.739947511  1.909103569 -1.443893161
    ##  [141]  0.701784335 -0.262197489 -1.572144159 -1.514667654 -1.601536174
    ##  [146] -0.530906522 -1.461755585  0.687916773  2.100108941 -1.287030476
    ##  [151]  0.787738847  0.769042241  0.332202579 -1.008376608 -0.119452607
    ##  [156] -0.280395335  0.562989533 -0.372438756  0.976973387 -0.374580858
    ##  [161]  1.052711466 -1.049177007 -1.260155245           NA -0.416857588
    ##  [166]  0.298227592  0.636569674 -0.483780626  0.516862044  0.368964527
    ##  [171] -0.215380508  0.065293034 -0.034067254  2.128451899 -0.741336096
    ##  [176] -1.095996267  0.037788399  0.310480749  0.436523479 -0.458365333
    ##  [181] -1.063326134  1.263185176 -0.349650388 -0.865512863 -0.236279569
    ##  [186] -0.197175894  1.109920290  0.084737292  0.754053785 -0.499292017
    ##  [191]  0.214445310 -0.324685911  0.094583528 -0.895363358 -1.310801533
    ##  [196]  1.997213385  0.600708824 -1.251271362 -0.611165917 -1.185480085
    ##  [201]  2.198810349  1.312412976 -0.265145057  0.543194059 -0.414339948
    ##  [206] -0.476246895 -0.788602838 -0.594617267  1.650907467 -0.054028125
    ##  [211]  0.119245236  0.243687430  1.232475878 -0.516063831 -0.992507150
    ##  [216]  1.675696932 -0.441163217 -0.723065970 -1.236273119 -1.284715722
    ##  [221] -0.573973479  0.617985817  1.109848139  0.707588354 -0.363657297
    ##  [226]  0.059749937 -0.704596464 -0.717218162  0.884650499 -1.015592579
    ##  [231]  1.955293965 -0.090319594  0.214538827 -0.738527705 -0.574388690
    ##  [236] -1.317016132 -0.182925388  0.418982405  0.324304344 -0.781536487
    ##  [241] -0.788621971 -0.502198718  1.496060670 -1.137303621 -0.179051594
    ##  [246]  1.902361822 -0.100974885 -1.359840704 -0.664769435  0.485459979
    ##  [251] -0.375602872 -0.561876364 -0.343917234  0.090496647  1.598508771
    ##  [256] -0.088565112  1.080799496  0.630754116 -0.113639896 -1.532902003
    ##  [261] -0.521117318 -0.489870453  0.047154433  1.300198678  2.293078974
    ##  [266]  1.547581059 -0.133150964 -1.756527396 -0.388779864  0.089207223
    ##  [271]  0.845013004  0.962527968  0.684309429 -1.395274350  0.849643046
    ##  [276] -0.446557216  0.174802700  0.074551177  0.428166765  0.024674983
    ##  [281] -1.667475098  0.736495965  0.386026568 -0.265651625  0.118144511
    ##  [286]  0.134038645  0.221019469  1.640846166 -0.219050379  0.168065384
    ##  [291]  1.168383873  1.054181023  1.145263110 -0.577468001  2.002482730
    ##  [296]  0.066700871  1.866851845 -1.350902686  0.020983586  1.249914571
    ##  [301] -0.715242187 -0.752688968 -0.938538704 -1.052513279 -0.437159533
    ##  [306]  0.331179173 -2.014210498  0.211980433  1.236675046  2.037574018
    ##  [311]  1.301175992  0.756774764 -1.726730399 -0.601506708 -0.352046457
    ##  [316]  0.703523903 -0.105671334 -1.258648628  1.684435708  0.911391292
    ##  [321]  0.237430272  1.218108610 -1.338774287  0.660820298 -0.522912376
    ##  [326]  0.683745522 -0.060821955  0.632960713  1.335517615  0.007290090
    ##  [331]  1.017558637 -1.188434035 -0.721604440  1.519217711  0.377387973
    ##  [336] -2.052222820 -1.364037452 -0.200781016  0.865779404 -0.101883256
    ##  [341]  0.624187472  0.959005378  1.671054829  0.056016733 -0.051981906
    ##  [346] -1.753237359  0.099327594 -0.571850058 -0.974009583 -0.179906231
    ##  [351]  1.014943173 -1.992748489 -0.427279287  0.116637284 -0.893207570
    ##  [356]  0.333902942  0.411429921 -0.033036159 -2.465898194  2.571458146
    ##  [361] -0.205299257  0.651193282  0.273766491  1.024673235  0.817659446
    ##  [366] -0.209793171  0.378167772 -0.945408831  0.856923011 -0.461038339
    ##  [371]  2.416773354 -1.651048896 -0.463987243  0.825379863  0.510132547
    ##  [376] -0.589481039 -0.996780742  0.144475705 -0.014307413 -1.790281237
    ##  [381]  0.034551067  0.190230316  0.174726397 -1.055017043  0.476133278
    ##  [386]  1.378570137  0.456236403 -1.135588470 -0.435645470  0.346103620
    ##  [391] -0.647045631 -2.157646335  0.884250820 -0.829477612 -0.573560271
    ##  [396]  1.503900609 -0.774144930  0.845731540 -1.260682879 -0.354542403
    ##  [401] -0.073556019 -1.168651424 -0.634748265 -0.028841553  0.670695969
    ##  [406] -1.650546543 -0.349754239  0.756406439 -0.538809160  0.227291922
    ##  [411]  0.492228570  0.267835015  0.653257679 -0.122708661 -0.413676514
    ##  [416]           NA -0.092941018  0.430284696  0.535398841 -0.555278351
    ##  [421]  1.779502910  0.286424420  0.126315858  1.272266779 -0.718466221
    ##  [426] -0.450338624  2.397452480  0.011129187  1.633568421 -1.438506645
    ##  [431] -0.190516802  0.378423904  0.300038545 -1.005636260  0.019259275
    ##  [436] -1.077420653  0.712703325  1.084775090 -2.224987696  1.235693462
    ##  [441] -1.241044497  0.454769269  0.659902638 -0.199889828 -0.645113957
    ##  [446]  0.165321021  0.438818701  0.883302820 -2.052336984 -1.636379268
    ##  [451]  1.430402341  1.046628847  0.435288949  0.715178407  0.917174918
    ##  [456]           NA  1.110277097 -0.484987597  0.230616831 -0.295157801
    ##  [461]  0.871964954 -0.348472449  0.518503766 -0.390684979 -1.092787209
    ##  [466]  1.210010510  0.740900011  1.724262239  0.065153933  1.125002746
    ##  [471]  1.975419054 -0.281482115 -1.322951113 -0.239351567 -0.214041240
    ##  [476]  0.151680505  1.712304977 -0.326143893  0.373004656 -0.227684065
    ##  [481]  0.020450709  0.314057664  1.328214696  0.121318377  0.712842320
    ##  [486]  0.778860030  0.914773271 -0.574394552  1.626881214 -0.380956739
    ##  [491] -0.105784168  1.404050268  1.294083906 -1.089991872 -0.873071000
    ##  [496] -1.358079059  0.181847193  0.164840868  0.364114687  0.552157714
    ##  [501] -0.601892846 -0.993698591  1.026785056  0.751061303 -1.509166537
    ##  [506] -0.095147451 -0.895947823 -2.070751071  0.150120131 -0.079211709
    ##  [511] -0.097369268  0.216152542  0.882465164  0.205597504 -0.616435843
    ##  [516] -0.734799252 -0.131802793  0.310016987 -1.039680353 -0.184308869
    ##  [521]  0.967267260 -0.108280091 -0.698420668 -0.275945168  1.114648545
    ##  [526]  0.550043961  1.236675800  0.139097857  0.410275096 -0.558456912
    ##  [531]  0.605370669 -0.506333542 -1.420565505  0.127992966  1.945851218
    ##  [536]  0.800914340  1.165253390  0.358855723 -0.608557178 -0.202240855
    ##  [541] -0.273248107 -0.468699780  0.704167284 -1.197363502  0.866366132
    ##  [546]  0.864152486 -1.198622359  0.639491998  2.430226652 -0.557215482
    ##  [551]  0.844904241 -0.782201846  1.110711418  0.249824720  1.651915392
    ##  [556] -1.458970729 -0.051297886 -0.526925176 -0.197264869 -0.629578743
    ##  [561] -0.833843581  0.578722375 -1.087580714  1.484030932 -1.186206585
    ##  [566]  0.101079151  0.532989287  0.586735339 -0.301746664  0.079501995
    ##  [571]  0.961264152 -1.456465917 -0.781739712  0.320402314 -0.444781978
    ##  [576]  1.370003994  0.673253863  0.072166752 -1.507757318  0.026100225
    ##  [581] -0.316415868 -0.102346514 -1.181559227  0.498658044 -1.038956440
    ##  [586] -0.226221981  0.381425829 -0.783515789  0.582991406 -1.316510402
    ##  [591]           NA  0.464967991  0.840539827 -0.285845424  0.504126255
    ##  [596] -1.155916525 -0.127148607 -1.941518376  1.181180891  1.859910862
    ##  [601]  1.074012260 -0.027346966 -0.033330342 -1.516067623  0.790385344
    ##  [606] -0.210734181 -0.656742925 -1.412025793 -0.299762497 -0.849061135
    ##  [611] -0.397030520 -1.217599988  1.687589483 -0.016002527  1.074945077
    ##  [616]           NA -0.453197830 -0.675482292 -1.222926179  1.546609154
    ##  [621] -1.415281920  0.318390260  0.846436286  0.178190188 -0.875255477
    ##  [626]  0.941165807  0.170588082 -1.063497906 -1.388049048  2.086717434
    ##  [631] -0.678503145 -1.855571654  0.533259363  0.310230256 -1.353834336
    ##  [636] -1.942956414 -0.116302517  1.139396292  0.636124035 -0.492937424
    ##  [641] -0.834188232  0.271066757  0.157353347  0.629711747 -0.395797950
    ##  [646]  0.899354053 -0.830811527 -0.330544700  0.740814524  0.989971609
    ##  [651] -1.938504701  0.107190407  0.608779012 -1.450824313  0.480625600
    ##  [656] -0.828174270  1.020253012  0.538482032  0.769052295  0.120719329
    ##  [661]  0.863648434  1.380514528  1.966248015 -0.028395055 -2.249051090
    ##  [666]  0.031526005  0.205561208 -0.155345347  0.568288621  1.010677965
    ##  [671] -0.517982430 -0.294095327  0.397842209 -0.550223741  0.091267383
    ##  [676] -1.961707599 -1.119899721 -1.327755476 -0.853623697 -0.693304528
    ##  [681]  0.382305143  0.982113003 -0.727383529 -0.996838982 -1.041688859
    ##  [686] -0.414588726 -0.239029068  0.483617534 -0.321324842 -2.078489269
    ##  [691] -0.091434276  1.187186811  1.191601269 -0.788963218 -1.547776544
    ##  [696]  2.458060492 -0.162421942 -0.097451250  0.420574189 -1.614039457
    ##  [701] -0.728219111 -1.540442405 -0.693094614  0.118849433 -1.364709458
    ##  [706]  0.589982679  0.289344029 -0.904215026  0.226324942  0.748081162
    ##  [711]  1.061095253 -0.212848279 -0.093636794 -0.086714135  1.441461756
    ##  [716]  1.125071892  0.834401568 -0.287340800  0.373241434  0.403290331
    ##  [721] -1.041673294 -1.728304515  0.641830028 -1.529310531  0.001683688
    ##  [726]  0.250247821  0.563867390  0.189426238 -0.732853806  0.986365860
    ##  [731]  1.738633767  0.881178809 -1.943650901  1.399576185 -0.056055946
    ##  [736]  0.524914279  0.622033236 -0.096686073 -0.075263198  1.019157069
    ##  [741]  0.711601922  0.990262246  2.382926695  0.664415864  0.207381157
    ##  [746] -2.210633111           NA -0.482676822  2.374734715  0.374643568
    ##  [751]  1.538430199 -0.109710321  0.511470755  0.213957980 -0.186120699
    ##  [756] -0.120393825  1.012834336 -0.201458147 -2.037682494 -0.195889249
    ##  [761]  0.539790606  0.616455716  0.616567817 -1.692101521  0.368742058
    ##  [766]  0.967859210  1.276578681 -0.224961271 -0.321892586  1.487837832
    ##  [771] -1.667928046 -0.436829977  0.457462079 -1.617773765  0.279627862
    ##  [776]  1.877864021 -0.004060653 -0.278454025  0.474911714 -0.279072171
    ##  [781]  0.813400374  0.904435464  0.002691661 -1.176692158 -1.318220727
    ##  [786] -0.592997366  0.797380501 -1.958205175 -1.886325159 -0.653779825
    ##  [791]  0.394394848 -0.913566048  0.886749037  0.333369970 -0.170639618
    ##  [796]  0.818828137  0.388365163 -0.445935027  0.231114934  0.647513358
    ##  [801]  0.356283345 -0.658010208  0.855202205  1.152936226  0.276274557
    ##  [806]  0.144104662 -0.075625081  2.161415846  0.276315532 -0.158294029
    ##  [811] -2.507917802 -1.565281765 -0.077673201  0.206294045  0.276872459
    ##  [816]  0.821506780 -0.194152409  1.214588794 -0.921516043 -1.208442720
    ##  [821] -1.228986178  0.742297024 -0.082919942  0.789817922 -0.267706422
    ##  [826] -0.591892102 -0.368352575 -1.852616824 -1.169615260 -1.442034646
    ##  [831]  1.054322272 -0.597330091  0.789459853  1.516490602 -0.191774809
    ##  [836]  0.283878906 -1.751067519 -0.818669778  0.056214849  0.299086903
    ##  [841] -0.759398117           NA -0.458390139  0.064243557  0.649791867
    ##  [846] -0.026018635 -0.643567387  1.045305664  1.615545323 -0.029693971
    ##  [851]  0.562267345 -0.097412499  1.016455218 -1.156167394  2.320860224
    ##  [856] -0.603531248 -1.458849414 -0.350917827  0.146708484  1.623621208
    ##  [861]  0.911209677  0.142458432 -1.389483524 -0.866037745 -0.163284932
    ##  [866]  2.553026113 -1.860227574  1.131054652 -0.527234257  1.665990900
    ##  [871] -1.139200640  0.143623235 -1.099550942  0.903516426  1.483779489
    ##  [876]  1.950721006  0.797600658  1.843266255  1.246423909 -0.131874912
    ##  [881]  0.477037238 -0.971994211 -0.185202169  1.220963708  0.541284143
    ##  [886]  0.457357332 -1.038131040 -0.604513230 -0.764606014  0.395295870
    ##  [891] -0.990507630  0.562041390 -1.116416412  1.828530458  0.460591349
    ##  [896] -0.701003612  0.241045933 -0.352453199  0.371147960  0.243532719
    ##  [901] -1.014114173 -0.791313879  0.299593685  1.639051909  1.084617009
    ##  [906] -0.624567474  0.825922902 -0.048568353  0.301313652  0.260361491
    ##  [911]  2.575449764 -1.185288811  0.100919859 -1.779977288  0.589835923
    ##  [916]  1.096608472  1.445662241 -1.925145252  0.412769497  1.593369951
    ##  [921] -0.414015863 -0.212150532 -0.036537222  0.365018751  0.665159876
    ##  [926]  1.317820884 -0.095487590  0.196278045  2.487997877  0.431098928
    ##  [931]  0.188753109 -1.342243125  0.002856048 -0.221326153 -0.011045830
    ##  [936] -0.575417641 -0.686815652 -0.720773632 -0.214504515  1.368132648
    ##  [941]  1.049086627 -0.359975118 -1.685916455 -0.844583429 -0.457760533
    ##  [946]  0.103638004 -0.662607276  2.006680691 -0.272267534 -1.213944470
    ##  [951] -0.141261757 -1.005377582  0.156155707  0.233633614  0.355587612
    ##  [956] -1.621858259  0.220711291  0.310450081 -1.421108448  0.955365640
    ##  [961]  0.784170879  2.299619361  0.156702987  0.046733528  0.096585834
    ##  [966]  0.069766231 -1.848472775 -1.671127059 -0.077538967 -0.581067381
    ##  [971]  0.054736525 -2.111208373 -1.498698255 -1.101483439  0.986058221
    ##  [976] -1.098490007 -0.799513954  0.079873819 -0.322746362  0.146417179
    ##  [981]  2.305061982 -1.124603671 -0.305469640 -0.516759450  1.512395427
    ##  [986] -0.769484923 -0.082086904  0.787133614 -1.058590536  1.655175816
    ##  [991]  0.675762415 -1.074206610  0.454577809 -0.213307143  0.313228772
    ##  [996] -0.089975197  1.070516037 -1.351100386 -0.522616697 -0.249190678

이제 데이터에 있는 이상치를 삭제하겠습니다. 데이터에 속한 `NA`를 제거해주는 방법을 2가지 소개하겠습니다. `complete.cases()` 함수와 `is.na()` 함수를 사용하는 방법이 있습니다. 편의에 따라 사용하시면 됩니다.

``` r
# complete.cases()를 이용하여 NA를 제거하고 길이를 확인합니다.
x1 <- x[complete.cases(x)]
length(x1)
```

    ## [1] 993

``` r
# is.na()를 사용하여 NA를 제거하고 길이를 확인합니다.
x2 <- x[is.na(x) == FALSE]
length(x2)
```

    ## [1] 993

``` r
# 두 객체의 교집합의 길이를 확인합니다. 
# 만약 두 객체가 정확하게 겹친다면 교집합의 길이는 x1 또는 x2와 같게 됩니다.
intersect(x = x1, y = x2) %>% length()
```

    ## [1] 993

이상치를 탐지하는 더 쉬운 방법은 `boxplot.stats()` 함수를 이용하는 것입니다.

``` r
# x 벡터를 재생성합니다.
set.seed(seed = 123)
x <- rnorm(n = 1000, mean = 0, sd = 1)

# boxplot.stats() 함수는 리스트 객체를 반환하며 'out'에 이상치 값을 할당합니다.
boxplot.stats(x = x)
```

    ## $stats
    ## [1] -2.507917802 -0.628742409  0.009209639  0.664787870  2.575449764
    ## 
    ## $n
    ## [1] 1000
    ## 
    ## $conf
    ## [1] -0.05542029  0.07383957
    ## 
    ## $out
    ## [1]  3.241040 -2.643149 -2.660923 -2.809775 -2.601700  2.691714  2.684859

``` r
# 이상치를 NA로 변경한 후 삭제합니다. 
x[x == boxplot.stats(x)$out] <- NA
```

    ## Warning in x == boxplot.stats(x)$out: longer object length is not a
    ## multiple of shorter object length

``` r
x <- x[complete.cases(x)]
length(x = x)
```

    ## [1] 1000

상자수염그림에서 이상치를 탐지하는 것과 관련하여 주의해야 할 사항으로는, 이 방법이 이상치를 판단하는 일반적인 방법이 아니며 이상치라고 해서 분석하기 전에 모두 제거해야 하는 것도 아닙니다. 아울러 데이터의 특성에 따라 이상치를 판별하는 기준이 서로 다를 수 있다는 것입니다.

도수분포표 만들기
-----------------

숫자형 데이터를 요약하여 정보를 추출하는 방법으로 도수분포표를 만들어볼 수 있습니다. 도수분포표를 만드는 순서는 다음과 같습니다.

1.  데이터의 범위(최소값과 최대값)를 확인합니다.
2.  전체 데이터를 몇 개의 구간(계급)으로 나눌지 정합니다. 계급의 크기에 따라 간격을 정할 수 있으며, 반대로 하는 경우도 있습니다.
3.  각 구간에 속하는 데이터의 개수(빈도수)를 구합니다.
4.  빈도수 데이터로 상대도수와 누적상대도수를 계산하여 추가합니다.
5.  빈도수와 상대도수, 누적상대도수의 합계를 계산하여 추가합니다.

``` r
# 가상의 몸무게 데이터를 만듭니다.
set.seed(seed = 123)
weights <- rnorm(n = 100, mean = 70, sd = 10) %>% round(digits = 1L)

# 새로 생성한 데이터의 기초 통계량을 확인합니다.
myStats(weights)
```

    ## 최소값   : 46.9 
    ## 1분위수  : 65.075 
    ## 중앙값   : 70.6 
    ## 평  균   : 70.901 
    ## 3분위수  : 76.925 
    ## 최대값   : 91.9 
    ## 분  산   : 83.4858 
    ## 표준편차 : 9.1371

``` r
# 5kg 단위로 설정된 구간을 할당합니다.
# 이때, 최소값과 최대값을 포함하도록 합니다.
# Hmisc::cut2() 함수의 minmax 인자로 최소값 또는 최대값을 포함할지 여부를 지정합니다.
cuts <- Hmisc::cut2(x = weights,
                    cuts = seq(from = 45, to = 95, by = 5),
                    minmax = TRUE)

# 빈도수를 구합니다.
freq <- table(cuts)
print(freq)
```

    ## cuts
    ## [45,50) [50,55) [55,60) [60,65) [65,70) [70,75) [75,80) [80,85) [85,90) 
    ##       1       3      10      10      24      21      14       9       5 
    ## [90,95] 
    ##       3

``` r
# 각 구간별 상대도수를 구한 후, 도수분포표에 추가합니다.
relFreq <- prop.table(x = freq)
freq <- rbind(freq, relFreq)
print(freq)
```

    ##         [45,50) [50,55) [55,60) [60,65) [65,70) [70,75) [75,80) [80,85)
    ## freq       1.00    3.00    10.0    10.0   24.00   21.00   14.00    9.00
    ## relFreq    0.01    0.03     0.1     0.1    0.24    0.21    0.14    0.09
    ##         [85,90) [90,95]
    ## freq       5.00    3.00
    ## relFreq    0.05    0.03

``` r
# 각 구간별 누적상대도수를 구한 후, 도수분포표에 추가합니다.
cumFreq <- cumsum(x = relFreq)
freq <- rbind(freq, cumFreq)
print(freq)
```

    ##         [45,50) [50,55) [55,60) [60,65) [65,70) [70,75) [75,80) [80,85)
    ## freq       1.00    3.00   10.00   10.00   24.00   21.00   14.00    9.00
    ## relFreq    0.01    0.03    0.10    0.10    0.24    0.21    0.14    0.09
    ## cumFreq    0.01    0.04    0.14    0.24    0.48    0.69    0.83    0.92
    ##         [85,90) [90,95]
    ## freq       5.00    3.00
    ## relFreq    0.05    0.03
    ## cumFreq    0.97    1.00

``` r
# 행별 합계를 구한 후, 도수분포표에 추가합니다.
# margin = 1이면 열 기준으로 FUN에 할당된 함수를 적용합니다. 
freq <- addmargins(A = freq, margin = 2, FUN = sum)
print(freq)
```

    ##         [45,50) [50,55) [55,60) [60,65) [65,70) [70,75) [75,80) [80,85)
    ## freq       1.00    3.00   10.00   10.00   24.00   21.00   14.00    9.00
    ## relFreq    0.01    0.03    0.10    0.10    0.24    0.21    0.14    0.09
    ## cumFreq    0.01    0.04    0.14    0.24    0.48    0.69    0.83    0.92
    ##         [85,90) [90,95]    sum
    ## freq       5.00    3.00 100.00
    ## relFreq    0.05    0.03   1.00
    ## cumFreq    0.97    1.00   5.32

``` r
# 행과 열의 이름을 변경합니다.
rownames(freq) <- c('빈도수(명)', '상대도수(%)', '누적상대도수(%)')
colnames(freq) <- c('45~50kg', '50~55kg', '55~60kg', '60~65kg', '65~70kg',
                    '70~75kg', '75~80kg', '80~85kg', '85~90kg', '90kg이상', '합계')
print(freq)
```

    ##                 45~50kg 50~55kg 55~60kg 60~65kg 65~70kg 70~75kg 75~80kg
    ## 빈도수(명)         1.00    3.00   10.00   10.00   24.00   21.00   14.00
    ## 상대도수(%)        0.01    0.03    0.10    0.10    0.24    0.21    0.14
    ## 누적상대도수(%)    0.01    0.04    0.14    0.24    0.48    0.69    0.83
    ##                 80~85kg 85~90kg 90kg이상   합계
    ## 빈도수(명)         9.00    5.00     3.00 100.00
    ## 상대도수(%)        0.09    0.05     0.03   1.00
    ## 누적상대도수(%)    0.92    0.97     1.00   5.32

히스토그램 그리기 (Histogram)
-----------------------------

히스토그램은 데이터를 일정구간으로 나눈 후 얻은 빈도수를 가지고 그래프로 그려준 것입니다. 따라서 히스토그램을 그려보면 분석하려는 데이터가 어떤 분포를 보이는지 시각적으로 확인할 수 있습니다. `hist()` 함수를 사용하면 쉽게 히스토그램을 그릴 수 있습니다. `hist()` 함수의 인자들을 사용하여 분석가가 원하는 히스토그램을 그리는 방법을 알아보겠습니다.

``` r
# R studio에서 한글이 깨지지 않도록 R에 등록된 한글폰트를 지정합니다.
# R에 한글폰트를 등록하는 방법은 아래 링크를 참조하시기 바랍니다.
# [참조] 'https://youngbin90.blogspot.kr/2016/03/r-plot.html'
par(family = 'NanumGothic')

# 그래프 출력 화면을 2행 * 2열로 나눕니다. 
par(mfrow = c(2, 2))

# 먼저 기본형 히스토그램을 그립니다.
hist(x = x)

# y축에 빈도수 대신 상대도수로 바꿉니다. (freq = FALSE)
# 막대의 개수를 30개로 늘립니다. (breaks = 30)
# 막대 채우기 색을 회색으로 변경합니다. (col = 'gray50')
# 막대 테두리 색을 흰색으로 변경합니다. (border = 'white')
hist(x = x,
     freq = FALSE,
     breaks = 30,
     col = 'gray50',
     border = 'white')

# 빈도수를 출력합니다. (labels = TRUE)
# y축의 범위를 변경합니다. (ylim = c(0, 0.45))
hist(x = x,
     freq = FALSE,
     breaks = 30,
     col = 'gray50',
     border = 'white',
     labels = TRUE,
     ylim = c(0, 0.45))

# x축과 y축 이름을 변경합니다. (xlab = '데이터', ylab = '상대도수')
# 제목을 추가합니다. (main = '히스토그램 그리기')
# 한글 폰트를 지정합니다. (family = 'NanumGothic')
hist(x = x,
     freq = FALSE,
     breaks = 30,
     col = 'gray50',
     border = 'white',
     labels = TRUE,
     ylim = c(0, 0.45),
     xlab = '데이터',
     ylab = '상대도수',
     main = '히스토그램 그리기',
     family = 'NanumGothic')
```

<img src="2018-03-16-기초-통계-정리_files/figure-markdown_github/unnamed-chunk-13-1.png" width="750px" />

``` r
# 그래프 출력 화면을 1행 * 1열로 돌려놓습니다.
par(mfrow = c(1, 1))
```

정규성 테스트
-------------

회귀분석 같은 알고리즘의 경우, 종속변수나 오차에 대해 정규분포를 가정하고 있으므로 분석 모델링을 하기에 앞서 데이터의 분포를 확인할 필요가 있습니다. 데이터의 정규성을 그래프로 확인하는 방법과 통계적 유의성을 검정하는 방법을 차례로 소개합니다.

### 그래프로 확인하는 방법

자료의 정규성을 그래프로 확인하는 방법은 방금 살펴본 **히스토그램** 외에 **Normal QQ-Plot** 등을 그려보는 방법을 들 수 있습니다. 히스토그램에 확률밀도함수를 추가하는 방법으로 소개하겠습니다.

``` r
# 히스토그램을 그려 x의 분포 확인
hist(x = x, 
     breaks = 10, 
     probability = TRUE, 
     main = '히스토그램 예제', 
     family = 'NanumGothic')

# 히스트그램 위에 x의 확률밀도함수 추가
lines(x = density(x), col = 'red')
```

<img src="2018-03-16-기초-통계-정리_files/figure-markdown_github/unnamed-chunk-14-1.png" width="750px" />

이번에는 Normal QQ-plot을 그려보겠습니다. QQ-plot의 Q는 'qauntiles'에서 온 것입니다. 숫자형 데이터를 최소값부터 최대값까지 오름차순으로 정렬한 후, 일정한 간격에 위치한 값들을 2차원 평면에 그린 것입니다. 만약 두 개의 숫자형 데이터(확률분포)가 같은 분포를 갖는다면, quantiles 값들을 구해 2차원 평면에 그렸을 때 직선으로 그려집니다. 하나의 숫자형 데이터로 QQ-plot을 그려도 마찬가지입니다.

``` r
# QQ-plot이 직선인 경우, 정규분포를 가정할 수 있습니다. 
qqnorm(y = x)
```

<img src="2018-03-16-기초-통계-정리_files/figure-markdown_github/unnamed-chunk-15-1.png" width="750px" />

### 통계적 유의성 검정 방법

이번에는 통계적 유의성 검정 방법인 **Shapiro-Wilk 테스트**와 **Anderson-Darling 테스트**를 통해 데이터의 정규성을 확인하는 방법을 알아보겠습니다. 유의해야 할 점은, 이 두 가지 검정의 귀무가설은 **데이터가 정규분포한다**입니다. 따라서 p-value가 0.05보다 작으면 95% 유의수준 하에서 귀무가설을 기각할 수 있으며, **데이터가 정규분포한다고 할 수 없다**가 됩니다. 즉, 데이터가 정규분포한다고 가정하려면 p-value가 0.05보다 커야 합니다.

``` r
# Shapiro-Wilk 검정을 실시합니다. 
library(stats)
shapiro.test(x = x)
```

    ## 
    ##  Shapiro-Wilk normality test
    ## 
    ## data:  x
    ## W = 0.99838, p-value = 0.4765

``` r
# Anderson-Darling 검정을 실시합니다.
library(nortest)
ad.test(x = x)
```

    ## 
    ##  Anderson-Darling normality test
    ## 
    ## data:  x
    ## A = 0.29653, p-value = 0.592

이번 예제를 위해 임의로 생성한 `x` 데이터로 두 가지 검증을 실시한 결과, p-value가 모두 0.05보다 크다는 것을 확인할 수 있습니다. 따라서 귀무가설을 기각할 수 없으며 **x는 정규분포한다**고 가정할 수 있습니다.

### 첨도(Kurtosis)와 왜도(Skewness) 확인

데이터가 정규분포를 따르면 확률밀도함수는 종모양으로 그려집니다. 이 때, 중심이 뾰족한 정도는 **첨도**이며, 꼬리가 한 쪽으로 치우친 비대칭 정도는 **왜도**가 됩니다. 아래에 제시한 함수로 첨도와 왜도를 계산할 수 있습니다. 첨도와 왜도가 0에 가까울수록 정규분포로 가정할 수 있습니다.

``` r
# 첨도와 왜도를 계산하기 위해 필요 패키지를 불러옵니다.
library(e1071)

# 첨도를 계산합니다. 
# 첨도는 0보다 작으면 완만하고, 0보다 크면 뾰족한 모양을 갖습니다.
kurtosis(x = x)
```

    ## [1] -0.08010201

``` r
# 왜도를 계산합니다.
# 왜도는 0보다 작으면 왼쪽 꼬리가 길고, 0보다 크면 오른쪽 꼬리가 긴 모양을 갖습니다.
skewness(x = x)
```

    ## [1] 0.065196

표준화 vs 정규화
----------------

**표준화(Standardization)**와 **정규화(Normalization)**는 숫자형 데이터가 일정한 분포를 갖도록 변환하는 것을 의미합니다. 척도가 서로 다른 2개 이상의 숫자형 데이터를 그대로 사용하면 분석 모형이 각각의 척도에 영향을 받게 됩니다. 또한 인공신경망의 경우 입력값이 0~1 사이의 값으로 요구하는 경우에는 반드시 정규화를 해주어야 합니다. 표준화는 평균과 표준편차를 이용하여 변환하며, 표준화된 데이터(Z)는 -Inf과 Inf 사이의 값을 가집니다. 아래는 표준화된 데이터(`Z`)를 계산하는 공식입니다. 정규분포의 표준화와 같습니다. `x`는 원본 데이터, `μ`는 `x`의 평균이며, `σ`는 `x`의 표준편차입니다.
$$ Z = \\frac {x - \\mu} \\sigma $$

정규화는 모든 데이터가 0과 1 사이의 값을 갖도록 조정하는 것을 의미하며, 다양한 방법이 있으나 주로 최소값과 최대값을 이용하여 변환합니다. 정규화 공식은 아래와 같습니다. `x`는 원본 데이터, `min`은 `x`의 최소값이며, `max`는 `x`의 최대값입니다.
$$ x\_{new} = \\frac {x - min} {max - min} $$

R에서 표준화와 정규화를 할 때, `scale()` 함수를 사용하면 손쉽게 해결할 수 있습니다.

``` r
# set.seed()를 지정합니다. 
set.seed(seed = 123)

# 1부터 1000의 값을 가지는 숫자형 벡터를 만들고,
# 그 중 500개를 임의로 선택하여 a 객체에 할당합니다.
a <- sample(x = 1:1000, size = 500, replace = FALSE)
myStats(a)
```

    ## 최소값   : 1 
    ## 1분위수  : 228.75 
    ## 중앙값   : 476 
    ## 평  균   : 486.138 
    ## 3분위수  : 728.5 
    ## 최대값   : 998 
    ## 분  산   : 84491.97 
    ## 표준편차 : 290.675

``` r
# 평균이 0이고, 표준편차가 1인 데이터로 표준화합니다. 
scaled1 <- scale(x = a, center = mean(a), scale = sd(a))
myStats(scaled1)
```

    ## 최소값   : -1.669 
    ## 1분위수  : -0.885 
    ## 중앙값   : -0.035 
    ## 평  균   : 0 
    ## 3분위수  : 0.834 
    ## 최대값   : 1.761 
    ## 분  산   : 1 
    ## 표준편차 : 1

``` r
# 최소값이 0, 최대값이 1인 데이터로 정규화합니다. 
scaled2 <- scale(x = a, center = min(a), scale = (max(a) - min(a)))
myStats(scaled2)
```

    ## 최소값   : 0 
    ## 1분위수  : 0.228 
    ## 중앙값   : 0.476 
    ## 평  균   : 0.487 
    ## 3분위수  : 0.73 
    ## 최대값   : 1 
    ## 분  산   : 0.085 
    ## 표준편차 : 0.2915
